<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
      "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <title>Text Folding by JavaScript, e.g. for Instructions</title>
  <meta name="generator" content="Amaya, see http://www.w3.org/Amaya/" />
</head>

<body>
<h1>Text Folding by JavaScript for Instructions</h1>

<h2>Rationale</h2>

<h3>Text Size vs. Completeness</h3>

<p>When you are writing <strong>technical instructions for a non-technical
audience</strong>, e.g. about setting up an email client, addressing a group of
entrepreneurs, you are in a <strong>dilemma</strong>:</p>
<ol>
  <li>The instructions should cover all the details and background
  information.</li>
  <li>The instructions should be short, so people aren't intimidated by the
    size and can process them within a very short span of undivided
  attention.</li>
</ol>

<p>If you write up all the details, the text gets too long. If you just write
the key items, you're omitting required details for some trouble cases.</p>

<p>A solution to this dilemma is text folding: by default, display only the key
items, but offer the reader a link or button "show details" which, when
clicked, reveals additional information.</p>

<h3>Alternatives</h3>

<p>Many instruction pages are offered to an audience having somewhat different
environments, for instance</p>
<ul>
  <li>Setting up an email account is a fairly generic concept, but the clicks
    required do differ from Thunderbird to Outlook.</li>
  <li>Products and web services are sold with varying components, but referred
    to by identical electronic manuals (web pages). Who hasn't read manuals
    like "On Windows Vista and 7, go to Start / All Programs / Vendor Name /
    Product Name. On Windows 8, unless you are using Classic Shell, switch to
    the tile menu, click on 'All Programs', locate the 'Vendor Name' group,
  ..."</li>
</ul>

<p>Accomodating for all existing alternatives increases the size of the
document (often doubling it), causes complex grammar and confuses readers about
whether they should do A or B, just because they have a hard time (or no time,
in case of fast reading) to decode whether "if this, but not that, except when
having chosen option N" does or does not apply to them.</p>

<p>A solution is again text folding: offer a set of links or buttons
corresponding to options, like "click this if you have Windows 7, click that if
you have Windows 8." Of course the currently active option needs to be
highlighted to indicate the fact that it is active.</p>

<h2>Implementation Goals</h2>

<p>In current web technology we have standardized JavaScript logic and DOM
(Document Object Model) structure to selectively show or hide portions of text
in web pages. But somehow the browser needs to know what to show and what to
hide, so there needs to be some markup.</p>

<p>Nowadays many web authors need to edit HTML inside Content Management
Systems, so the markup needs to be compatible with a restricted subset of HTML.
Adding some SPANs or DIVs might be the most one can do.</p>

<p>A possible solution to this are class names. Every HTML node can be member
of zero or more classes, using code like <code>&lt;ol class="class1 class2
class3"&gt; ... &lt;/ol&gt;</code></p>

<p>This is what I've implemented.</p>

<h2>Using the code</h2>

<p>Here is what you need to do to use this code:</p>

<h3>Add the JavaScript Code</h3>

<p>Insert this line anywhere in the HTML file, preferably in the head section
or at the end of the body section:</p>

<p><code><strong>&lt;script type="text/javascript"
src="instruction-folding.js"&gt;&lt;/script&gt;</strong></code></p>

<h3>Define Conditional Sections</h3>

<p>The JavaScript code implements a variable-value model to specify which
sections should be shown or not. A section is shown if </p>
<ul>
  <li>either there is no condition specified (standard case for text that is
    shown always)</li>
  <li>or the current value of the given variable matches one of the values
    specified by the HTML node's classes.</li>
</ul>

<p><strong>If you want to show a section only if variable <code>var</code> has
value <code>val</code>, then assign it the class <code>if-var-val</code>
.</strong></p>

<p>If you want to show a section if variable <code>var</code> has either value
<code>val1</code> or value <code>val2</code>, then assign it to multiple
classes <code>if-var-val1</code> <code>if-var-val2</code> . You can also use
more than two classes.</p>

<p>Variable names and values must not contain dashes,
if-windows-version-windows-8 is doubly non-functional (variable name contains a
dash, value contains a dash). Any character permissible in a class name is
acceptable, but for clarity, you should restrict yourself to lower case letters
and digits.</p>

<h4>Example</h4>

<p><code>&lt;p class="if-windowsversion-vista
if-windowsversion-7"&gt;</code></p>

<p><code>This text will be displayed for Windows Vista or Windows 7, but will
be hidden for Windows 8.</code></p>

<p><code>&lt;/p&gt;</code></p>

<h3>Define Setting Links</h3>

<p>To set variable <code>var</code> to value <code>val</code>, the user needs
to click on an HTML node having the <code>set-var-val</code> class. This will
add <code>onclick</code> code to this HTML node.<br />
After clicking on a setter node, the clicked node will additionally be assigned
to the <code>setter-active</code> class. This can be used as a CSS selector to
highlight the currently active value.</p>

<p>It you want a certain setter to contain the default value that's effective
before any setter is clicked, assign it to the class <code>var-default</code> .
This will act as if this setter is being clicked right after the page is
loaded.</p>

<h4>Example</h4>

<p><code>&lt;p&gt;Select your computer's operating system:</code></p>

<p><code>&lt;strong class="setter set-windowsversion-vista"&gt;Windows
Vista&lt;/strong&gt;</code></p>

<p><code>&lt;strong class="setter set-windowsversion-7 var-default"&gt;Windows
7&lt;/strong&gt;</code></p>

<p><code>&lt;strong class="setter set-windowsversion-8"&gt;Windows
8&lt;/strong&gt;&lt;/p&gt;</code></p>

<p>This offers a choice of Windows Vista, 7 and 8, with Windows 7 being the
default.</p>

<p>The <code>setter</code> class has no influence on the hiding logic, but is
useful as a CSS selector to highlight areas that can be clicked on. It could
have any other name.</p>

<h2>Future Work</h2>

<p>IMO the "show/hide explanation" use case requires too much HTML code. It
should be easier than now for the author to write such cases.</p>

<p></p>
</body>
</html>
